{{ define "header" }}
<p>URL: <a href="{{ .Params.link }}" target="_blank" rel="noopener">{{ .Params.link }} â¬ˆ</a></p>
<p><a class="hover:underline" href="/categories">Categories</a>:
    {{- range $index, $value := sort .Params.categories -}}
    {{ if $index }},{{ end }}
    <a class="hover:underline" href="/categories/{{ $value | urlize}}">{{ $value }}</a>
    {{- end -}}
</p>
{{ end }}

{{ define "main" }}
{{ .Content }}

<div class="flex flex-wrap md:flex-nowrap -mx-4" data-colcade="columns: .masonry-col, items: .masonry-item">
    <div class="masonry-col w-full max-w-xl"></div>
    <div class="masonry-col w-full max-w-xl hidden sm:block"></div>
    <div class="masonry-col w-full max-w-xl hidden xl:block"></div>
    <div class="masonry-col w-full max-w-xl hidden 2xl:block"></div>

    {{ $captionClasses := "block p-2 border-b font-display" }}
    {{ range .Resources.Match "images/*" }}
    {{ $img := .Resize "600x Linear" }}
    <figure class="masonry-item mx-4 mb-8">
        <div class="border rounded shadow overflow-hidden">
            <caption>
                {{ $name := index (split .Name ".") 1 }}
                {{ if not .Params.link }}
                <span class="{{ $captionClasses }}">{{ $name }}</span>
                {{ else }}
                <a href="{{ .Params.link }}" class="{{ $captionClasses }}" target="_blank" rel="noopener noreferrer">
                    {{ $name }}
                </a>
                {{ end}}
            </caption>
            <img class="object-contain object-top" src="{{ $img.Permalink }}" alt="{{ $.Title }}">
        </div>
    </figure>
    {{ end }}
</div>

{{ end }}